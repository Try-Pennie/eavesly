{
  "type": "object",
  "properties": {
    "budget_collection_overview": {
      "type": "object",
      "title": "Budget Collection Overview",
      "description": "Summary of budget item collection across all 4 required categories.",
      "required": [
        "items_collected",
        "items_skipped",
        "budget_compliance_violation"
      ],
      "additionalProperties": false,
      "properties": {
        "items_collected": {
          "type": "integer",
          "description": "Number of budget categories that were successfully collected (0-4).",
          "title": "Items Collected",
          "minimum": 0,
          "maximum": 4
        },
        "items_skipped": {
          "type": "integer",
          "description": "Number of budget categories that were not collected (0-4).",
          "title": "Items Skipped",
          "minimum": 0,
          "maximum": 4
        },
        "budget_compliance_violation": {
          "type": "boolean",
          "description": "ALERT FIELD: Set to TRUE when 2 or more budget items were skipped. This triggers a Slack alert for manager review.",
          "title": "Budget Compliance Violation"
        }
      }
    },
    "housing_payment": {
      "type": "object",
      "title": "Housing Payment",
      "description": "Assessment of whether the agent collected mortgage or rent payment information.",
      "required": [
        "collected",
        "how_collected",
        "evidence"
      ],
      "additionalProperties": false,
      "properties": {
        "collected": {
          "type": "boolean",
          "description": "Was housing payment information collected during the call?",
          "title": "Collected"
        },
        "how_collected": {
          "type": "string",
          "description": "Method by which housing payment info was obtained.",
          "title": "How Collected",
          "enum": [
            "agent_asked",
            "customer_volunteered",
            "broad_question",
            "not_collected"
          ]
        },
        "evidence": {
          "type": "string",
          "description": "Direct quote from the transcript or explanation of why the item was marked as collected/not collected.",
          "title": "Evidence"
        }
      }
    },
    "auto_payment": {
      "type": "object",
      "title": "Auto Payment",
      "description": "Assessment of whether the agent collected car loan or lease payment information.",
      "required": [
        "collected",
        "how_collected",
        "evidence"
      ],
      "additionalProperties": false,
      "properties": {
        "collected": {
          "type": "boolean",
          "description": "Was auto payment information collected during the call?",
          "title": "Collected"
        },
        "how_collected": {
          "type": "string",
          "description": "Method by which auto payment info was obtained.",
          "title": "How Collected",
          "enum": [
            "agent_asked",
            "customer_volunteered",
            "broad_question",
            "not_collected"
          ]
        },
        "evidence": {
          "type": "string",
          "description": "Direct quote from the transcript or explanation of why the item was marked as collected/not collected.",
          "title": "Evidence"
        }
      }
    },
    "utilities": {
      "type": "object",
      "title": "Utilities",
      "description": "Assessment of whether the agent collected utility bill information (electric, gas, water, internet, phone).",
      "required": [
        "collected",
        "how_collected",
        "evidence"
      ],
      "additionalProperties": false,
      "properties": {
        "collected": {
          "type": "boolean",
          "description": "Was utility payment information collected during the call?",
          "title": "Collected"
        },
        "how_collected": {
          "type": "string",
          "description": "Method by which utility info was obtained.",
          "title": "How Collected",
          "enum": [
            "agent_asked",
            "customer_volunteered",
            "broad_question",
            "not_collected"
          ]
        },
        "evidence": {
          "type": "string",
          "description": "Direct quote from the transcript or explanation of why the item was marked as collected/not collected.",
          "title": "Evidence"
        }
      }
    },
    "other_debts_expenses": {
      "type": "object",
      "title": "Other Debts and Expenses",
      "description": "Assessment of whether the agent collected information about other recurring obligations (credit cards, student loans, child support, insurance, groceries, medical) beyond what appears on the credit report.",
      "required": [
        "collected",
        "how_collected",
        "evidence"
      ],
      "additionalProperties": false,
      "properties": {
        "collected": {
          "type": "boolean",
          "description": "Was other debts/expenses information collected during the call?",
          "title": "Collected"
        },
        "how_collected": {
          "type": "string",
          "description": "Method by which other debts/expenses info was obtained.",
          "title": "How Collected",
          "enum": [
            "agent_asked",
            "customer_volunteered",
            "broad_question",
            "not_collected"
          ]
        },
        "evidence": {
          "type": "string",
          "description": "Direct quote from the transcript or explanation of why the item was marked as collected/not collected.",
          "title": "Evidence"
        }
      }
    },
    "violation_reason": {
      "type": "string",
      "description": "Explanation of why a budget compliance violation occurred, including which items were skipped. Empty string if no violation.",
      "title": "Violation Reason"
    },
    "key_evidence_quote": {
      "type": "string",
      "description": "The most relevant direct quote from the transcript for manager review. For violations, this should highlight the gap in budget collection. For compliant calls, this should show the agent properly gathering budget info.",
      "title": "Key Evidence Quote"
    }
  },
  "required": [
    "budget_collection_overview",
    "housing_payment",
    "auto_payment",
    "utilities",
    "other_debts_expenses",
    "violation_reason",
    "key_evidence_quote"
  ],
  "additionalProperties": false
}