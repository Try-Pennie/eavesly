name = "eavesly"
main = "src/index.ts"
compatibility_date = "2024-12-01"
account_id = "3e7f907a9c19e51417873e2cce4fbc5c"

[vars]
ENVIRONMENT = "development"
OPENROUTER_MODEL = "openai/gpt-4.1"

# Secrets (set via `wrangler secret put`):
# INTERNAL_API_KEY
# SUPABASE_URL
# SUPABASE_SERVICE_ROLE_KEY
# CF_ACCOUNT_ID
# CF_GATEWAY_ID
# CF_AIG_TOKEN
# SLACK_WEBHOOK_URL

[[rules]]
type = "Text"
globs = ["prompts/**/*.txt"]
fallthrough = true

[[workflows]]
name = "eavesly-evaluation"
binding = "EVALUATION_WORKFLOW"
class_name = "EvaluationWorkflow"

[observability]
[observability.logs]
enabled = false
invocation_logs = true

[env.staging]
name = "eavesly-staging"
vars = { ENVIRONMENT = "staging", OPENROUTER_MODEL = "openai/gpt-4.1" }

[[env.staging.workflows]]
name = "eavesly-evaluation-staging"
binding = "EVALUATION_WORKFLOW"
class_name = "EvaluationWorkflow"

[env.production]
name = "eavesly-production"
vars = { ENVIRONMENT = "production", OPENROUTER_MODEL = "openai/gpt-4.1" }

[[env.production.workflows]]
name = "eavesly-evaluation-production"
binding = "EVALUATION_WORKFLOW"
class_name = "EvaluationWorkflow"
